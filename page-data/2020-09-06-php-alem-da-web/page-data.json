{"componentChunkName":"component---src-templates-blog-post-js","path":"/2020-09-06-php-alem-da-web/","result":{"data":{"site":{"siteMetadata":{"title":"Dias de Dev"}},"markdownRemark":{"id":"0185b5c1-ffc9-586d-9351-8c21b0bd57d4","excerpt":"PHP além da Web PHP + Web = <3 Não é nenhum segredo que o PHP nasceu na web e para a web. Seu propósito inicial era servir páginas dinâmicas de forma simples e…","html":"<h1>PHP além da Web</h1>\n<h2>PHP + Web = &#x3C;3</h2>\n<p>Não é nenhum segredo que o PHP nasceu na web e para a web. Seu propósito inicial era servir páginas dinâmicas de forma simples e amigável, mas a Web evoluiu e o PHP também. Hoje em dia o PHP é uma linguagem de programação completa e pronta para ser executada nos mais diversos ambientes, e não só na Web.</p>\n<h3>Web além do HTML</h3>\n<p>Antes de sair da Web, acredito que seja muito importante citar que nem só de HTML vive a Web. É mais do que comum vermos URLs gerando dados nos mais diversos formatos como XML, JSON, etc. Você provavelmente conhece isso como API, correto? Obviamente o PHP está mais do que preparado para este tipo de trabalho e de forma muito simples. A ideia desse artigo é trazer as possibilidades realmente fora da Web.</p>\n<h2>Por que usar PHP fora da web?</h2>\n<p>Antes de vermos as possibilidades, por que eu iria fazer isso? Se o PHP nasceu na Web, por que não mantê-lo lá? Bom, existem diversos motivos para trazermos o PHP para demais ambientes, mas acredito que o mais óbvio e o principal é a equipe. Se nós já temos uma equipe de pessoas que desenvolvem em PHP na Web, por que não utilizar esse conhecimento também fora da Web para processamento de dados assíncronos, leitura de filas, cronjobs, scripts da CLI em geral, etc? É justamente sobre essas possibilidades que quero tratar nesta publicação.</p>\n<h2>Existe vida além da Web?</h2>\n<p>Agora que já entendemos o motivo de possivelmente utilizar PHP fora da Web, vamos falar sobre… o que seria esse “fora da Web”. Em uma equipe de desenvolvimento Web, o que poderia estar fora da Web para nós precisarmos utilizar PHP?</p>\n<h3>Processos assíncronos</h3>\n<p>Uma requisição web deve acontecer da forma mais rápida possível para que o usuário/cliente não fique esperando uma resposta, e uma das técnicas muito conhecidas para evitar essa espera é tornar alguns processos assíncronos.</p>\n<p>Se ao cadastrar um usuário no banco de dados nós precisamos enviar um e-mail, por exemplo, não há necessidade de fazê-lo esperar até nós conseguirmos enviar este e-mail para só depois entregar a resposta. Nós podemos armazenar em algum lugar a informação de que um e-mail deverá ser enviado, e fazer isso depois, fora da web, sem que o usuário fique esperando.</p>\n<p>Existem inúmeras formas de atingir este objetivo. Uma das mais comuns é através de filas de processos. Nós armazenamos as informações sobre o processo que deve ser executado em algum local específico para isso, e futuramente, fora da web, recuperamos esta informação para processá-la. Banco de dados, mensagerias, onde for. O importante é que a tarefa demorada não faça com que o usuário nos espere.</p>\n<h3>Scripts CLI</h3>\n<p>Um cenário também muito comum, principalmente em empresas de médio e grande porte, é ter processos que devem ser executados periodicamente de forma manual ou automatica. Sincronização de dados, processamento de informações, o que for… Essas tarefas não precisam ser executadas em um ambiente web, e normalmente são executadas na linha de comando. Os processos automaticos são conhecidos como <em>cronjobs</em> ou tarefas agendadas. Já os processos executados manualmente são simples scripts ou programas de linha de comando (CLI).</p>\n<p>O PHP é um executável capaz de rodar na linha de comando e não há dificuldade nenhuma em utilizá-lo para estes casos. Inclusive há diversos recursos da linguagem que nos permitem acessar detalhes interessantes deste novo mundo fora da grande rede mundial.</p>\n<h4>Features fora da web</h4>\n<p>Com PHP nós conseguimos ler parâmetros da linha de comando através de variáveis “mágicas” como <a href=\"https://php.net/argv\">$argv</a> e <a href=\"https://php.net/argc\">$argc</a>. Isso nos permite interatividade de forma semelhante ao que a Web nos traria com formulários, parâmetros via URL, etc.</p>\n<p>Além de argumentos, podemos receber algumas opções para personalizar a execução de nossos códigos. A função <a href=\"https://php.net/getopt\">getopt</a> consegue nos ajudar a fazer isso de forma simples e profissional, exatamente como os mais famosos comandos que estamos habituados a utilizar já fazem.</p>\n<h3>Ferramentas</h3>\n<p>O mundo de componentes PHP é fantástico. Temos ferramentas mágicas como Symfony para criar aplicações Web, Doctrine para acessar o banco de dados com mais facilidade, PHPUnit para realizar testes automatizados… Mas será que existem ferramentas específicas para facilitar nosso mundo fora da Web? A resposta felizmente é SIM!</p>\n<h4>Criação de programas</h4>\n<p>O próprio Symfony possui uma das ferramentas mais conhecidas para criação de programas na CLI: O <a href=\"https://symfony.com/doc/current/components/console.html\">Symfony Console</a>. Com ele nós podemos criar aplicações de forma semelhantes com a que criamos na Web, mas ao invés de <em>Controllers</em> criamos <em>Commands</em>, por exemplo. Todas as facilidades de um framework moderno podem ser utilizadas fora da Web sem maiores problemas.</p>\n<p>Obviamente está não é a única opção, mas diversas outras ferramentas fazem uso do <em>Symfony Console</em>. Algumas alternativas são <em>Laravel Zero</em>, CLImate, Aura.CLI, etc.</p>\n<h4>Performance</h4>\n<p>Tarefas que são executadas por trás das cortinas tendem a ser mais pesadas, exigir mais I/O ou mais processamento. Nesses casos podemos recorrer a ferramentas específicas para resolver tais problemas.</p>\n<p>Se temos um cenários de muitas requisições para servidores externos, seja em chamadas HTTP, STMP ou outros protocolos, devemos fazer bom uso dos streams do PHP e trabalhar com programação assíncrona. Uma ótima ferramenta que pode nos ajudar muito com isso é a <a href=\"https://reactphp.org/#core-components\">ReactPHP</a> que fornece diversos componentes com os mais diversos propósitos.</p>\n<p>Já se muito processamento é utilizado, com calculos complexos, manipulação de imagens e qualquer outra coisa que consuma muita CPU, paralelização é a resposta. Podemos criar processos através da extensão <a href=\"https://php.net/pcntl\">pcntl</a> ou threads através da extensão <a href=\"https://php.net/parallel\">parallel</a>. Ambas as opções requerem um estudo mais aprofundado sobre conceitos de sistemas operacionais e programação paralela, mas o resultado é muito gratificante.</p>\n<p>Se você quiser entender um pouco melhor sobre a diferença entre Progração Assíncrona e Programação Paralela, pode conferir este vídeo: <a href=\"https://www.youtube.com/watch?v=zLfXPSeCkB8\">https://www.youtube.com/watch?v=zLfXPSeCkB8</a></p>\n<h2>Conclusão</h2>\n<p>Nesta rápida leitura já conseguimos notar que não só é possível utilizar PHP fora da Web como também ele está muito preparado para este ambiente.</p>\n<p>Por ser uma linguagem de programação completa e madura, diversas bibliotecas, extensões e componentes já surgiram para resolver problemas comuns e cabe a nós, devs e amantes do PHP, aprendê-las e utilizá-las.</p>\n<p>Além disso, com o advento do <a href=\"https://www.youtube.com/watch?v=WLx0z9kloro\">JIT</a> que chegará no PHP 8, o uso do PHP fora da web se tornará ainda mais efetivo. Diversas otimizações de baixo nível que eu nem mesmo sei explicar vão acontecer, tornando possíveis aplicações que requerem ainda mais processamento como IoT, Machine Learning e vários outros nomes bonitos que não me arriscarei a citar.</p>\n<p>Se você ainda acha que PHP está preso na Web, acredito que não há momento melhor para abrir os olhos e conhecer este novo mundo!</p>","frontmatter":{"title":"","date":null,"description":null}}},"pageContext":{"slug":"/2020-09-06-php-alem-da-web/","previous":{"fields":{"slug":"/2020-09-16-php-assincrono-de-forma-nativa/"},"frontmatter":{"title":"PHP assíncrono de forma nativa"}},"next":null}},"staticQueryHashes":["2841359383","3257411868"]}